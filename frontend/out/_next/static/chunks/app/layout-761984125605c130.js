(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[177],{9699:(e,t,s)=>{Promise.resolve().then(s.bind(s,9401)),Promise.resolve().then(s.bind(s,4627)),Promise.resolve().then(s.t.bind(s,4415,23)),Promise.resolve().then(s.t.bind(s,2494,23)),Promise.resolve().then(s.t.bind(s,9324,23)),Promise.resolve().then(s.bind(s,5037))},1237:(e,t,s)=>{"use strict";s.d(t,{n:()=>c});var r=s(2208),a=s(709),n=s(1319),o=s(2651),i=s(5037);let l="development"===s(2818).env.MODE?"http://localhost:3001":"/",c=(0,r.v)()((0,a.Zr)((e,t)=>({hasHydrated:!1,authUser:null,isCheckingAuth:!0,onlineUsers:[],isUpdatingProfile:!1,socket:null,checkAuth:async()=>{try{let s=await fetch("".concat(l,"/api/user/checkAuth"),{method:"GET",credentials:"include"});if(s.ok){let r=await s.json();e({authUser:r.user,isCheckingAuth:!1}),t().connectSocket()}else e({authUser:null})}catch(t){console.error("Error during authentication check:",t),e({authUser:null})}},login:async s=>{try{let r=await fetch("".concat(l,"/api/user/login"),{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});if(r.ok){let s=await r.json();e({authUser:s.user}),i.oR.success("Login successful"),t().connectSocket(),console.log("auth user in login function is",t().authUser)}else{let e=await r.json();throw Error(e.message||"Invalid credentials")}}catch(e){throw console.error("Error during login:",e.message),e}},logout:async()=>{try{await fetch("".concat(l,"/api/user/logout"),{method:"POST",credentials:"include"}),i.oR.success("Logout successful"),e({authUser:null}),t().disconnectSocket()}catch(e){console.error("Error during logout:",e)}},updateProfile:async t=>{e({isUpdatingProfile:!0});try{let s=(await o.A.patch("".concat(l,"/api/user/update-profile"),{profilepic:t},{headers:{"Content-Type":"application/json"},withCredentials:!0})).data;console.log("Updated user is",s),e({authUser:s})}catch(e){console.error("Error updating profile:",e)}finally{e({isUpdatingProfile:!1})}},connectSocket:()=>{let{authUser:s,socket:r}=t();if(console.log("authUser",s),!s||!s._id){console.log("No auth user");return}if(s&&!r){let t=(0,n.io)(l,{query:{userId:s._id}});t.connect(),e({socket:t}),console.log("Socket from connectSocket function is",r),t.on("getOnlineUsers",t=>{console.log("Online users received:",t),e({onlineUsers:t})}),console.log("Socket connected")}},disconnectSocket:()=>{let s=t().socket;s&&s.connected&&s.disconnect(),e({socket:null})}}),{name:"auth-storage",storage:(0,a.KU)(()=>localStorage),partialize:e=>({authUser:e.authUser,onlineUsers:e.onlineUsers,isCheckingAuth:e.isCheckingAuth,isUpdatingProfile:e.isUpdatingProfile,...Object.fromEntries(Object.entries(e).filter(e=>{let[t]=e;return!["socket","connectSocket","disconnectSocket"].includes(t)}))})}))},9401:(e,t,s)=>{"use strict";s.d(t,{default:()=>j});var r=s(5155),a=s(2115),n=s(1237),o=s(6046),i=s(8173),l=s.n(i),c=s(4085),d=s(7725),u=s(2104),h=s(7113),f=s(7176),m=s(6967),p=s(8867),g=s(3565),x=s(9602);let v=f.bL,y=f.l9;f.YJ,f.ZL,f.Pb,f.z6,a.forwardRef((e,t)=>{let{className:s,inset:a,children:n,...o}=e;return(0,r.jsxs)(f.ZP,{ref:t,className:(0,x.cn)("flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",a&&"pl-8",s),...o,children:[n,(0,r.jsx)(m.A,{className:"ml-auto"})]})}).displayName=f.ZP.displayName,a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)(f.G5,{ref:t,className:(0,x.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",s),...a})}).displayName=f.G5.displayName;let b=a.forwardRef((e,t)=>{let{className:s,sideOffset:a=4,...n}=e;return(0,r.jsx)(f.ZL,{children:(0,r.jsx)(f.UC,{ref:t,sideOffset:a,className:(0,x.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md","data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",s),...n})})});b.displayName=f.UC.displayName;let N=a.forwardRef((e,t)=>{let{className:s,inset:a,...n}=e;return(0,r.jsx)(f.q7,{ref:t,className:(0,x.cn)("relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&>svg]:size-4 [&>svg]:shrink-0",a&&"pl-8",s),...n})});function k(){let{setTheme:e}=(0,h.D)();return(0,r.jsxs)(v,{children:[(0,r.jsx)(y,{asChild:!0,children:(0,r.jsxs)(c.$,{variant:"outline",size:"icon",children:[(0,r.jsx)(d.A,{className:"h-[1.2rem] w-[1.2rem] rotate-0 scale-100 transition-all dark:-rotate-90 dark:scale-0"}),(0,r.jsx)(u.A,{className:"absolute h-[1.2rem] w-[1.2rem] rotate-90 scale-0 transition-all dark:rotate-0 dark:scale-100"}),(0,r.jsx)("span",{className:"sr-only",children:"Toggle theme"})]})}),(0,r.jsxs)(b,{align:"end",children:[(0,r.jsx)(N,{onClick:()=>e("light"),children:"Light"}),(0,r.jsx)(N,{onClick:()=>e("dark"),children:"Dark"}),(0,r.jsx)(N,{onClick:()=>e("system"),children:"System"})]})]})}N.displayName=f.q7.displayName,a.forwardRef((e,t)=>{let{className:s,children:a,checked:n,...o}=e;return(0,r.jsxs)(f.H_,{ref:t,className:(0,x.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s),checked:n,...o,children:[(0,r.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,r.jsx)(f.VF,{children:(0,r.jsx)(p.A,{className:"h-4 w-4"})})}),a]})}).displayName=f.H_.displayName,a.forwardRef((e,t)=>{let{className:s,children:a,...n}=e;return(0,r.jsxs)(f.hN,{ref:t,className:(0,x.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s),...n,children:[(0,r.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,r.jsx)(f.VF,{children:(0,r.jsx)(g.A,{className:"h-2 w-2 fill-current"})})}),a]})}).displayName=f.hN.displayName,a.forwardRef((e,t)=>{let{className:s,inset:a,...n}=e;return(0,r.jsx)(f.JU,{ref:t,className:(0,x.cn)("px-2 py-1.5 text-sm font-semibold",a&&"pl-8",s),...n})}).displayName=f.JU.displayName,a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)(f.wv,{ref:t,className:(0,x.cn)("-mx-1 my-1 h-px bg-muted",s),...a})}).displayName=f.wv.displayName;let j=()=>{let{authUser:e,logout:t}=(0,n.n)(),s=(0,o.useRouter)(),a=async()=>{await t(),s.push("/")};return(0,r.jsxs)("nav",{className:"flex items-center justify-between px-4 py-2 bg-gray-100 dark:bg-gray-800",children:[(0,r.jsxs)("div",{className:"text-lg font-bold cursor-pointer hover:text-gray-600 dark:hover:text-gray-300",onClick:()=>s.push("/"),children:["MyApp",(0,r.jsx)("span",{className:"text-red-500",children:"beta"})]}),(0,r.jsxs)("div",{className:"flex space-x-4",children:[(0,r.jsx)(l(),{href:"/",className:"hover:underline hover:text-gray-600 dark:hover:text-gray-300",children:"Home"}),(0,r.jsx)(l(),{href:"/about",className:"hover:underline hover:text-gray-600 dark:hover:text-gray-300",children:"About"}),(0,r.jsx)(l(),{href:"/chatpage",className:"hover:underline hover:text-gray-600 dark:hover:text-gray-300",children:"Messenger"}),e&&(0,r.jsx)(l(),{href:"/profile",className:"hover:underline hover:text-gray-600 dark:hover:text-gray-300",children:"Profile"})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[e?(0,r.jsx)(c.$,{onClick:a,className:"bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded",children:"Logout"}):(0,r.jsx)(c.$,{onClick:()=>{s.push("/login")},className:"bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded",children:"Login"}),(0,r.jsx)(k,{})]})]})}},4627:(e,t,s)=>{"use strict";s.d(t,{ThemeProvider:()=>n});var r=s(5155);s(2115);var a=s(7113);function n(e){let{children:t,...s}=e;return(0,r.jsx)(a.N,{...s,children:t})}},4085:(e,t,s)=>{"use strict";s.d(t,{$:()=>c});var r=s(5155),a=s(2115),n=s(1290),o=s(652),i=s(9602);let l=(0,o.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),c=a.forwardRef((e,t)=>{let{className:s,variant:a,size:o,asChild:c=!1,...d}=e,u=c?n.DX:"button";return(0,r.jsx)(u,{className:(0,i.cn)(l({variant:a,size:o,className:s})),ref:t,...d})});c.displayName="Button"},9602:(e,t,s)=>{"use strict";s.d(t,{cn:()=>n});var r=s(3463),a=s(9795);function n(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,a.QP)((0,r.$)(t))}},9324:()=>{}},e=>{var t=t=>e(e.s=t);e.O(0,[30,135,627,65,25,441,517,358],()=>t(9699)),_N_E=e.O()}]);